<!--pages/category/category.wxml - 分类浏览页-->
<view class="page">
  <view class="layout">
    <!-- 左侧分类导航 -->
    <scroll-view class="sidebar" scroll-y enhanced show-scrollbar="{{false}}">
      <view
        wx:for="{{categories}}"
        wx:key="code"
        class="sidebar-item {{currentIndex === index ? 'active' : ''}}"
        bindtap="onCategoryTap"
        data-index="{{index}}">
        <text class="sidebar-name">{{item.shortName}}</text>
        <text class="sidebar-count">{{item.productCount}}</text>
      </view>
    </scroll-view>

    <!-- 右侧产品列表 -->
    <scroll-view
      class="content"
      scroll-y
      enhanced
      show-scrollbar="{{false}}"
      scroll-top="{{scrollTop}}">
      <!-- 分类标题 -->
      <view class="content-header">
        <text class="content-title">{{categories[currentIndex].name}}</text>
        <text class="content-count">共 {{products.length}} 个产品</text>
      </view>

      <!-- 产品网格 -->
      <view class="product-grid">
        <view
          wx:for="{{products}}"
          wx:key="id"
          class="grid-card"
          bindtap="onProductTap"
          data-id="{{item.id}}">
          <view class="grid-image-wrap">
            <image
              wx:if="{{item.image}}"
              class="grid-image"
              src="{{item.image}}"
              mode="aspectFill"
              lazy-load />
            <view wx:else class="grid-image-placeholder">
              <text class="placeholder-icon">&#x1F4E6;</text>
            </view>
          </view>
          <view class="grid-info">
            <text class="grid-name">{{item.name}}</text>
            <text class="grid-spec">{{item.spec}}</text>
            <text class="grid-brand">{{item.brandShort}}</text>
          </view>
        </view>
      </view>

      <!-- 空状态 -->
      <view wx:if="{{products.length === 0}}" class="empty-state">
        <text class="empty-icon-text">&#x1F4AD;</text>
        <text class="empty-text">该分类暂无产品</text>
      </view>
    </scroll-view>
  </view>
</view>
