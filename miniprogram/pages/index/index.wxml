<!-- pages/index/index.wxml - 首页 -->
<view class="container">
    <!-- 搜索栏 -->
    <view class="search-bar" bindtap="goToSearch">
        <image class="search-icon" src="/assets/icons/search.png" mode="aspectFit"></image>
        <text class="search-placeholder">搜索产品名称、规格...</text>
    </view>
    <!-- 分类横向滚动 -->
    <scroll-view class="category-scroll" scroll-x enable-flex>
        <view class="category-list">
            <view class="category-item {{currentCategoryId === null ? 'active' : ''}}" bindtap="selectCategory" data-id="{{null}}">
                全部
            </view>
            <view wx:for="{{categories}}" wx:key="id" class="category-item {{currentCategoryId === item.id ? 'active' : ''}}" bindtap="selectCategory" data-id="{{item.id}}">
                {{item.shortName || item.name}}
            </view>
        </view>
    </scroll-view>
    <!-- 产品列表 -->
    <view class="product-list">
        <block wx:if="{{loading}}">
            <view class="loading">
                <text>加载中...</text>
            </view>
        </block>
        <block wx:elif="{{products.length === 0}}">
            <view class="empty-state">
                <image class="empty-icon" src="/assets/icons/empty.png" mode="aspectFit"></image>
                <text class="empty-text">暂无产品数据</text>
            </view>
        </block>
        <block wx:else>
            <view wx:for="{{products}}" wx:key="id" class="product-card" bindtap="goToProduct" data-id="{{item.id}}">
                <image class="product-image" src="{{item.imageUrl || item.image || '/assets/images/placeholder.png'}}" mode="aspectFill" lazy-load></image>
                <view class="product-info">
                    <text class="product-name">{{item.name}}</text>
                    <text class="product-spec" wx:if="{{item.spec}}">{{item.spec}}</text>
                    <view class="product-meta">
                        <text class="product-brand" wx:if="{{item.brandName}}">
                            {{item.brandName}}
                        </text>
                        <text class="product-price" wx:if="{{item.price}}">¥{{item.price}}</text>
                    </view>
                </view>
            </view>
        </block>
    </view>
    <!-- 加载更多 -->
    <view class="load-more" wx:if="{{hasMore && !loading}}">
        <text bindtap="loadMore">加载更多</text>
    </view>
</view>