<!--pages/product/product.wxml - 产品详情页-->
<view class="page" wx:if="{{product}}">
  <!-- 产品图片 -->
  <view class="hero-section">
    <image
      wx:if="{{product.image}}"
      class="hero-image"
      src="{{product.image}}"
      mode="aspectFill" />
    <view wx:else class="hero-placeholder">
      <text class="hero-icon">&#x1F4E6;</text>
      <text class="hero-text">暂无图片</text>
    </view>
  </view>

  <!-- 产品基本信息 -->
  <view class="info-section">
    <text class="product-name">{{product.name}}</text>
    <view class="tag-row">
      <text class="tag tag-category">{{product.categoryShort}}</text>
      <text class="tag tag-brand">{{product.brandShort}}</text>
    </view>
  </view>

  <!-- 详情卡片 -->
  <view class="detail-card">
    <view class="detail-row">
      <text class="detail-label">规格</text>
      <text class="detail-value">{{product.spec || '未标注'}}</text>
    </view>
    <view class="detail-row">
      <text class="detail-label">单位</text>
      <text class="detail-value">{{product.unit || '未标注'}}</text>
    </view>
    <view class="detail-row">
      <text class="detail-label">品牌</text>
      <text class="detail-value">{{product.brand || '未标注'}}</text>
    </view>
    <view class="detail-row" bindtap="onCopyCode">
      <text class="detail-label">产品编码</text>
      <view class="detail-value code-value">
        <text>{{product.productCode}}</text>
        <text class="copy-hint">点击复制</text>
      </view>
    </view>
    <view class="detail-row" wx:if="{{product.price}}">
      <text class="detail-label">价格</text>
      <text class="detail-value price-value">{{product.price}}</text>
    </view>
  </view>

  <!-- 操作按钮 -->
  <view class="action-bar">
    <button class="action-btn share-btn" open-type="share">
      <text>&#x1F4E4; 分享产品</text>
    </button>
    <button class="action-btn contact-btn" bindtap="onContact">
      <text>&#x1F4CB; 复制信息</text>
    </button>
  </view>

  <!-- 同分类推荐 -->
  <view class="related-section" wx:if="{{relatedProducts.length > 0}}">
    <text class="section-title">同类产品推荐</text>
    <scroll-view class="related-scroll" scroll-x enhanced show-scrollbar="{{false}}">
      <view class="related-list">
        <view
          wx:for="{{relatedProducts}}"
          wx:key="id"
          class="related-card"
          bindtap="onRelatedTap"
          data-id="{{item.id}}">
          <view class="related-image-wrap">
            <image
              wx:if="{{item.image}}"
              class="related-image"
              src="{{item.image}}"
              mode="aspectFill"
              lazy-load />
            <view wx:else class="related-placeholder">
              <text>&#x1F4E6;</text>
            </view>
          </view>
          <text class="related-name">{{item.name}}</text>
          <text class="related-spec">{{item.spec}}</text>
        </view>
      </view>
    </scroll-view>
  </view>
</view>

<!-- 产品不存在 -->
<view wx:else class="empty-state">
  <text class="empty-icon-text">&#x1F50D;</text>
  <text class="empty-text">产品信息加载中...</text>
</view>
