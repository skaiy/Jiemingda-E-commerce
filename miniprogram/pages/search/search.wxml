<!--pages/search/search.wxml - 搜索页-->
<view class="page">
  <!-- 搜索栏 -->
  <view class="search-bar-wrap">
    <view class="search-bar">
      <text class="search-icon">&#x1F50D;</text>
      <input
        class="search-input"
        placeholder="搜索产品名称、品牌、规格..."
        value="{{keyword}}"
        bindinput="onInput"
        bindconfirm="onSearch"
        focus="{{true}}"
        confirm-type="search" />
      <text wx:if="{{keyword}}" class="clear-btn" bindtap="onClear">&#x2715;</text>
    </view>
  </view>

  <!-- 热门分类（未搜索时显示） -->
  <view wx:if="{{!searched}}" class="hot-section">
    <text class="section-title">热门分类</text>
    <view class="hot-tags">
      <view
        wx:for="{{hotCategories}}"
        wx:key="code"
        class="hot-tag"
        bindtap="onHotCategoryTap"
        data-name="{{item.name}}">
        <text>{{item.shortName}}</text>
        <text class="hot-count">{{item.productCount}}</text>
      </view>
    </view>
  </view>

  <!-- 搜索结果 -->
  <view wx:if="{{searched}}" class="results-section">
    <view class="results-header">
      <text class="results-count">找到 {{results.length}} 个产品</text>
    </view>

    <!-- 产品列表 -->
    <view class="result-list">
      <view
        wx:for="{{results}}"
        wx:key="id"
        class="product-card"
        bindtap="onProductTap"
        data-id="{{item.id}}">
        <view class="card-image-wrap">
          <image
            wx:if="{{item.image}}"
            class="card-image"
            src="{{item.image}}"
            mode="aspectFill"
            lazy-load />
          <view wx:else class="card-image-placeholder">
            <text class="placeholder-icon">&#x1F4E6;</text>
          </view>
        </view>
        <view class="card-info">
          <text class="card-name">{{item.name}}</text>
          <text class="card-spec">{{item.spec}}</text>
          <view class="card-meta">
            <text class="card-brand">{{item.brandShort}}</text>
            <text class="card-category">{{item.categoryShort}}</text>
          </view>
        </view>
      </view>
    </view>

    <!-- 无结果 -->
    <view wx:if="{{results.length === 0}}" class="empty-state">
      <text class="empty-icon-text">&#x1F50D;</text>
      <text class="empty-text">未找到相关产品</text>
      <text class="empty-hint">试试其他关键词</text>
    </view>
  </view>
</view>
